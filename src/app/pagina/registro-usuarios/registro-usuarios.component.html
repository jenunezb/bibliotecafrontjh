<div>
  <h2>Registro de Usuario</h2>

  <form class="registration-form">
    <div class="form-group" required>
      <label for="rol">Rol:</label>
      <select id="rol" name="rol" class="form-control" [(ngModel)]="usuarioDto.rol" required>
        <option value="" disabled selected>Seleccione un rol</option>
        <option value="administrador">Administrador</option>
        <option value="ingeniero">Ingeniero</option>
        <option value="digitador">Digitador</option>
        <option value="cliente">Cliente</option>
      </select>
    </div>

    <div class="form-group">
      <label for="correo">Correo Electrónico:</label>
      <input type="email" id="correo" name="correo" class="form-control" [(ngModel)]="usuarioDto.correo" required
        (input)="validarCorreo()" (input)="detectarCambios()">
      <!-- Mostrar alerta si el campo de correo está incompleto -->
      <div *ngIf="alertaCorreoIncompleto" class="alert alert-danger" role="alert">
        Debe ser una dirección de correo electrónico con formato correcto.
      </div>
    </div>
    

    <div class="form-group" required>
      <label for="password">Contraseña:</label>
      <input type="password" id="password" name="password" class="form-control" [(ngModel)]="usuarioDto.password" required>
    </div>

    <div class="mb-3 row">
      <label class="col-sm-2 col-form-label">Confirmar Contraseña: </label>
      <div class="col-sm-10">
      <input #confirmarPassword="ngModel"
      [ngClass]="confirmarPassword.invalid && (confirmarPassword.dirty || confirmarPassword.touched) ? 'is-invalid' : ''" type="password"
      name="confirmarPassword" class="form-control" required [(ngModel)]="usuarioDto.confirmaPassword" required/>
      <div class="alert alert-danger" role="alert" *ngIf="!sonIguales()" style="color: #721c24; background-color: #f8d7da; padding: 0.75rem 1.25rem; border-radius: 0.25rem;">
        Las contraseñas no coinciden
      </div>
      
      </div>
      </div>

    <div *ngIf="usuarioDto.rol === 'ingeniero' || usuarioDto.rol === 'digitador' || usuarioDto.rol === 'cliente'">
      <!-- Campos solo para el rol de administrador -->
      <!-- Estos campos solo se mostrarán si el rol seleccionado es "administrador" -->
      <div class="form-group">
        <label for="cedula">Cédula:</label>
        <input type="text" id="cedula" name="cedula" class="form-control" [(ngModel)]="usuarioDto.cedula" >
      </div>
      
      <div class="form-group">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" class="form-control" [(ngModel)]="usuarioDto.nombre" >
      </div>
      
      <div class="form-group">
        <label for="telefono">Teléfono:</label>
        <input type="tel" id="telefono" name="telefono" class="form-control" [(ngModel)]="usuarioDto.telefono" >
      </div>

      <div class="form-group">
        <label for="cargo">Cargo:</label>
        <input type="text" id="cargo" name="cargo" class="form-control" [(ngModel)]="usuarioDto.cargo" >
      </div>
      
      <div class="form-group">
        <label for="ciudad">Ciudad:</label>
        <select id="ciudad" name="ciudad" class="form-control" [(ngModel)]="usuarioDto.ciudad" >
          <option value="" selected disabled>Seleccione una ciudad</option>
          <option *ngFor="let ciudad of dataSource.data" [value]="ciudad.nombre">{{ ciudad.nombre }}</option>
        </select>
      </div>
      </div>

      <div class="form-group text-center">
        <button type="button" class="btn btn-primary disabled-button" (click)="registrar()" [ngClass]="{'matched-password-button': sonIguales()}" [disabled]="!sonIguales()">Registrarse</button>
      </div>

   <!-- Mensaje de alerta -->
<div *ngIf="alerta" style="margin-top: 10px;">
  <div *ngIf="alerta.tipo === 'danger'" style="color: #721c24; background-color: #f8d7da; padding: 0.75rem 1.25rem; border-radius: 0.25rem;">
    {{ alerta.mensaje }}
  </div>
  <div *ngIf="alerta.tipo === 'success'" style="color: #155724; background-color: #d4edda; padding: 0.75rem 1.25rem; border-radius: 0.25rem;">
    {{ alerta.mensaje }}
  </div>
  <div class="alert alert-danger" role="alert" *ngIf="sonCamposVacios()" style="color: #721c24; background-color: #f8d7da; padding: 0.75rem 1.25rem; border-radius: 0.25rem; margin-bottom: 1rem; width: auto;">
    Por favor completa todos los campos obligatorios.
  </div>
  
</div>

      </form>
</div>
